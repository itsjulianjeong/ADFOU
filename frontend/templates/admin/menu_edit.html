<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>메뉴 순서 조정</title>
    <style>
        td { text-align: center; padding: 5px; }
        button.move-btn { font-size: 14px; margin: 0 2px; }
    </style>
</head>
<body>
    {% include 'admin/navbar.html' %}

    <h2>메뉴 정렬 순서 조정</h2>

    <form id="menuForm" method="post">
        <table id="menuTable" border="1">
            <tr><th>메뉴</th><th>가격</th><th>순서 조정</th></tr>
            {% for menu in menu_list %}
            <tr>
                <td>
                    <input type="hidden" name="menu_id" value="{{ menu[0] }}">
                    {{ menu[1] }}
                </td>
                <td>{{ menu[2] }}원</td>
                <td>
                    <button type="button" class="move-btn" onclick="moveUp(this)">🔼</button>
                    <button type="button" class="move-btn" onclick="moveDown(this)">⬇️</button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <br>
        <button type="submit">저장</button>
    </form>

    <script>
        function moveUp(btn) {
            const row = btn.closest("tr");
            const prev = row.previousElementSibling;
            if (prev && prev.rowIndex !== 0) {
                row.parentNode.insertBefore(row, prev);
            }
        }

        function moveDown(btn) {
            const row = btn.closest("tr");
            const next = row.nextElementSibling;
            if (next) {
                row.parentNode.insertBefore(next, row);
            }
        }

        // 폼 전송 시 현재 행 순서대로 hidden menu_id 전송됨
    </script>
</body>
</html>
